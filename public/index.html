<!-- force update -->
<!-- updated by Reese 2025 -->
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ˜Ÿèªè€… Star Whisperer âœ¦ Voyage of the Star River</title>

    <!-- å­—é«” -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Noto+Sans+TC:wght@300;400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --color-dark-blue: #0a192f;
        --color-light-blue: #ccd6f6;
        --color-accent: #64ffda;
        --color-gold: #ffd700;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans TC", "Inter", sans-serif;
        background-color: var(--color-dark-blue);
        color: var(--color-light-blue);
        line-height: 1.6;
        scroll-behavior: smooth;
      }

      a {
        text-decoration: none;
        color: var(--color-accent);
        transition: color 0.3s ease;
      }

      a:hover {
        color: var(--color-light-blue);
      }

      h2 {
        font-size: 2.5rem;
        text-align: center;
        color: var(--color-accent);
        margin-bottom: 2rem;
      }

      /* Header */
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 5%;
        background-color: rgba(10, 25, 47, 0.95);
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--color-gold);
      }

      .header nav a {
        margin-left: 20px;
        font-size: 1rem;
        color: var(--color-light-blue);
      }

      .header nav a:hover {
        color: var(--color-accent);
      }

      /* ä½¿ç”¨è€…é¡¯ç¤ºå€ */
      #user-info {
        color: var(--color-accent);
        font-size: 1rem;
        margin-left: 20px;
      }

      .logout-btn {
        background: none;
        border: 1px solid var(--color-accent);
        color: var(--color-accent);
        padding: 4px 10px;
        border-radius: 6px;
        cursor: pointer;
        margin-left: 10px;
        transition: 0.3s;
      }

      .logout-btn:hover {
        background-color: rgba(100, 255, 218, 0.1);
      }

      .go-library-btn {
        background: transparent;
        border: 1px solid var(--color-gold);
        color: var(--color-gold);
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        margin-left: 10px;
        transition: 0.3s;
      }

      .go-library-btn:hover {
        background-color: rgba(255, 215, 0, 0.1);
      }

      /* Sections */
      .section {
        padding: 8rem 10% 4rem;
        min-height: 100vh;
      }

      #hero {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        background: radial-gradient(circle at 50% 20%, #112240, #000814 90%);
      }

      .hero-content h1 {
        font-size: 4rem;
        color: var(--color-light-blue);
        text-shadow: 0 0 10px var(--color-accent);
      }

      .hero-content p {
        font-size: 1.5rem;
        margin-bottom: 2rem;
      }

      .btn {
        display: inline-block;
        padding: 0.75rem 2rem;
        background-color: transparent;
        color: var(--color-accent);
        border: 2px solid var(--color-accent);
        font-weight: 700;
        border-radius: 5px;
        transition: all 0.3s ease;
      }

      .btn:hover {
        background-color: rgba(100, 255, 218, 0.1);
      }

      .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
      }

      .product-card {
        background-color: #0d213a;
        border-radius: 10px;
        overflow: hidden;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      }

      .product-card img {
        width: 100%;
        height: 350px;
        object-fit: cover;
      }

      .footer {
        text-align: center;
        padding: 2rem 5%;
        border-top: 1px solid rgba(100, 255, 218, 0.2);
        color: rgba(204, 214, 246, 0.7);
      }

      /* âœ¦ ç™»å…¥ / è¨»å†Š Modal âœ¦ */
      .login-modal {
        display: none;
        position: fixed;
        z-index: 3000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .login-modal.active {
        display: flex;
        opacity: 1;
        pointer-events: auto;
      }

      .login-content {
        background: rgba(10, 25, 47, 0.95);
        border: 2px solid var(--color-accent);
        border-radius: 15px;
        padding: 2rem;
        width: 90%;
        max-width: 400px;
        text-align: center;
        box-shadow: 0 0 30px rgba(100, 255, 218, 0.4);
        position: relative;
      }

      .login-content input {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border-radius: 8px;
        border: 1px solid var(--color-accent);
        background: #0d213a;
        color: var(--color-light-blue);
      }

      .close-btn {
        color: var(--color-accent);
        font-size: 24px;
        font-weight: bold;
        position: absolute;
        top: 15px;
        right: 25px;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <header class="header">
      <div class="logo">âœ¦ Star Whisperer</div>
      <nav id="nav-links">
        <a href="#about">é—œæ–¼</a>
        <a href="#products">å•†å“</a>
        <a href="javascript:void(0)" onclick="openAuth()" id="login-link"
          >ç™»å…¥ / åŠ å…¥æœƒå“¡</a
        >
        <span id="user-info" style="display: none">
          ğŸŒŒ <span id="user-name"></span>
          <button class="go-library-btn" onclick="goLibrary()">
            é€²å…¥å®‡å®™ä¹‹æ›¸
          </button>
          <button class="logout-btn" onclick="logout()">ç™»å‡º</button>
        </span>
      </nav>
    </header>

    <section id="hero" class="section hero">
      <div class="hero-content">
        <h1>â‹† Voyage of the Star River â‹†</h1>
        <p>ç©¿è¶Šæ˜Ÿæ²³ï¼Œå‚¾è½å®‡å®™çš„ä½èªã€‚</p>
        <a href="#products" class="btn">æ¢ç´¢ç³»åˆ—å•†å“</a>
      </div>
    </section>

    <section id="about" class="section fade-in">
      <h2>é—œæ–¼æ˜Ÿèªè€…</h2>
      <p style="text-align: center; max-width: 700px; margin: auto">
        ã€Œæ˜Ÿèªè€…ã€çµåˆå¤©æ–‡éˆæ„Ÿèˆ‡æ¥µç°¡ç¾å­¸ï¼Œæˆ‘å€‘ç›¸ä¿¡å®‡å®™ä¸­çš„æ¯ä¸€é¡†æ˜Ÿï¼Œ
        éƒ½ä»£è¡¨ä¸€æ®µéˆé­‚æ—…ç¨‹ã€‚
      </p>
    </section>

    <section id="products" class="section fade-in">
      <h2>æ˜Ÿéš›ç³»åˆ—å•†å“</h2>
      <div class="product-grid">
        <div class="product-card">
          <img
            src="https://centralus1-mediap.svc.ms/transform/thumbnail?provider=spo&farmid=193391&inputFormat=jpg&cs=MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDQ4MTcxMGE0fFNQTw&docid=https%3A%2F%2Fmy.microsoftpersonalcontent.com%2F_api%2Fv2.0%2Fdrives%2Fb!4VrUlS7MWEaJ1xM-yYIBVvEjVr13gFRMt80uLQq7cd813T0GELsuTo1Ud9XDonz7%2Fitems%2F01WMUDEIKG3INPAZJ4INE245YKEG7ORWW4%3Ftempauth%3Dv1e.eyJzaXRlaWQiOiI5NWQ0NWFlMS1jYzJlLTQ2NTgtODlkNy0xMzNlYzk4MjAxNTYiLCJhcHBpZCI6IjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDA0ODE3MTBhNCIsImF1ZCI6IjAwMDAwMDAzLTAwMDAtMGZmMS1jZTAwLTAwMDAwMDAwMDAwMC9teS5taWNyb3NvZnRwZXJzb25hbGNvbnRlbnQuY29tQDkxODgwNDBkLTZjNjctNGM1Yi1iMTEyLTM2YTMwNGI2NmRhZCIsImV4cCI6IjE3NjI3NjUyMDAifQ.6RnsrygW2uxRgcyO7CMXYrmUqTwh6EeRhgkVubi8iWvBEfcryljge3n0XcXyXII77vUyp_8accFiPc5HOsZeuZtG7WA58rNdC1DbWpJqSzTRGTdYunRq6GaGupSAScJLaEVDo087bm2-nlh9bNpKRdzypM8ORaMLrZfU1UPptf01E_wGYWoWRDH50FUqU7dyxPSzERCsIToKf2ykjBL1U996u6x_FcVDfYXbP0Riqp6xpVvVY8ZoRRHb_lh8MsA69zkZLa66yFBbWnoEUt3oz6GmHa4Gp1xKrxR4O0lBSIarmNWssnwnENyTIXpi1KvaP_uJlsUgsD3kFiQph8kMiUlWrRfnkhBGEC1DP6sElDy-h6JO4sy5BCOfOhQUGdKh.1nz22kXvwbT7KA-SKxCn_wNi78SaWr4DQ_KQjHETJZM%26version%3DPublished&cb=63896956318&encodeFailures=1&width=927&height=927&action=Access"
          />
          <h3>Cosmic Voyager Hoodie</h3>
          <p>æŸ”è»Ÿæ£‰è³ªï¼ŒåŒ…è¦†å¦‚æ˜Ÿå…‰èˆ¬æº«æš–ã€‚</p>
        </div>
        <div class="product-card">
          <img
            src="https://centralus1-mediap.svc.ms/transform/thumbnail?provider=spo&farmid=193391&inputFormat=png&cs=MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDQ4MTcxMGE0fFNQTw&docid=https%3A%2F%2Fmy.microsoftpersonalcontent.com%2F_api%2Fv2.0%2Fdrives%2Fb!4VrUlS7MWEaJ1xM-yYIBVvEjVr13gFRMt80uLQq7cd813T0GELsuTo1Ud9XDonz7%2Fitems%2F01WMUDEIP6SZL4IYXPIZC2WTGMDS2FJRSO%3Ftempauth%3Dv1e.eyJzaXRlaWQiOiI5NWQ0NWFlMS1jYzJlLTQ2NTgtODlkNy0xMzNlYzk4MjAxNTYiLCJhcHBpZCI6IjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDA0ODE3MTBhNCIsImF1ZCI6IjAwMDAwMDAzLTAwMDAtMGZmMS1jZTAwLTAwMDAwMDAwMDAwMC9teS5taWNyb3NvZnRwZXJzb25hbGNvbnRlbnQuY29tQDkxODgwNDBkLTZjNjctNGM1Yi1iMTEyLTM2YTMwNGI2NmRhZCIsImV4cCI6IjE3NjI3NjUyMDAifQ.Nm6EFnLt94_wMhXy2lQaxvU27NoOVTIEhbPq_Kjn01ErahMWEfkwTJxDcvzSh4opZenet4sq7Yb54EgP_RXTZXaeqk2zF0scENP4qAIDdX0xHW3ymWFWGmE4u0ZFZQoCbkyqcCS-TQqo9tVMS_hqMGqh3QP2ZhC2b70K8-T8nmeHiId9hHssHr_7Mo03OyaANz9ATCudYnZ12t_KjC68bQvsivDS8NbWzA5Fk__fs317T0UaMb-jk8VziXxQJvSxE0ttkkLv67lxY9ER9QrvZqIWEIuG0GgW7fA3k5w3Oj6WEXEVFpHxEpygdPP_7eLnjbJ9UkWHxQ4TLHfXh3gXNO4c3zHi_uN5nATtlpMey0-MAIacKM7tzLpiezfnZxI8.mkC1BewZP_j9rQsYfgUthzvRtei3cB2TD_8rhVHsl54%26version%3DPublished&cb=63896781655&encodeFailures=1&width=927&height=927&action=Access"
          />
          <h3>Celestial Pulse Watch</h3>
          <p>ä»¥è¡Œæ˜Ÿè»Œè·¡ç‚ºéˆæ„Ÿçš„æ˜Ÿéš›è…•éŒ¶ã€‚</p>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>Â© 2025 Star Whisperer | Voyage of the Star River</p>
    </footer>

    <!-- âœ¦ ç™»å…¥ / è¨»å†Š Modal -->
    <div id="auth-modal" class="login-modal">
      <div class="login-content">
        <span class="close-btn" id="close-auth">&times;</span>

        <!-- ç™»å…¥è¡¨å–® -->
        <div id="login-section">
          <h3 style="color: var(--color-accent); margin-bottom: 1rem">
            ç™»å…¥æ˜Ÿèªè€…å®‡å®™ âœ¦
          </h3>
          <form id="loginForm">
            <input type="text" id="username" placeholder="å¸³è™Ÿ" required />
            <input type="password" id="password" placeholder="å¯†ç¢¼" required />
            <button
              type="submit"
              class="btn"
              style="width: 100%; margin-top: 10px"
            >
              ç™»å…¥ âœ¦
            </button>
          </form>
          <p
            style="
              margin-top: 1rem;
              color: var(--color-light-blue);
              font-size: 0.9rem;
            "
          >
            é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ
            <a
              href="javascript:void(0)"
              onclick="showRegister()"
              style="color: var(--color-accent)"
              >åŠ å…¥æœƒå“¡</a
            >
          </p>
        </div>

        <!-- è¨»å†Šè¡¨å–® -->
        <div id="register-section" style="display: none">
          <h3 style="color: var(--color-accent); margin-bottom: 1rem">
            åŠ å…¥æ˜Ÿèªè€…å®‡å®™ âœ¦
          </h3>
          <form id="registerForm">
            <input
              type="text"
              id="newUsername"
              placeholder="å»ºç«‹å¸³è™Ÿ"
              required
            />
            <input
              type="password"
              id="newPassword"
              placeholder="è¨­å®šå¯†ç¢¼"
              required
            />
            <button
              type="submit"
              class="btn"
              style="width: 100%; margin-top: 10px"
            >
              è¨»å†Š âœ¦
            </button>
          </form>
          <p
            style="
              margin-top: 1rem;
              color: var(--color-light-blue);
              font-size: 0.9rem;
            "
          >
            å·²æœ‰å¸³è™Ÿï¼Ÿ
            <a
              href="javascript:void(0)"
              onclick="showLogin()"
              style="color: var(--color-accent)"
              >è¿”å›ç™»å…¥</a
            >
          </p>
        </div>
      </div>
    </div>

    <script>
      // === Modal æ§åˆ¶ ===
      const authModal = document.getElementById("auth-modal");
      const closeAuthBtn = document.getElementById("close-auth");
      const loginSection = document.getElementById("login-section");
      const registerSection = document.getElementById("register-section");
      const loginLink = document.getElementById("login-link");
      const userInfo = document.getElementById("user-info");
      const userName = document.getElementById("user-name");

      function openAuth() {
        authModal.classList.add("active");
      }
      function closeAuth() {
        authModal.classList.remove("active");
      }

      closeAuthBtn.addEventListener("click", closeAuth);
      window.addEventListener("click", (e) => {
        if (e.target === authModal) closeAuth();
      });

      function showRegister() {
        loginSection.style.display = "none";
        registerSection.style.display = "block";
      }

      function showLogin() {
        registerSection.style.display = "none";
        loginSection.style.display = "block";
      }

      // === ç™»å…¥ ===
      document
        .getElementById("loginForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          const username = document.getElementById("username").value;
          const password = document.getElementById("password").value;

          const res = await fetch("/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ username, password }),
            credentials: "include",
          });

          const data = await res.json();
          if (data.success) {
            alert(`æ­¡è¿å›ä¾†ï¼Œ${data.user.username} âœ¦`);
            closeAuth();
            window.location.href = "library.html"; // ç™»å…¥å¾Œè‡ªå‹•é€²å…¥å®‡å®™ä¹‹æ›¸
          } else {
            alert("ç™»å…¥å¤±æ•—ï¼š" + data.message);
          }
        });

      // === ç™»å‡º ===
      async function logout() {
        await fetch("/logout", { method: "POST", credentials: "include" });
        alert("å·²ç™»å‡º âœ¦");
        loginLink.style.display = "inline";
        userInfo.style.display = "none";
      }

      // === è¿”å›å®‡å®™ä¹‹æ›¸ ===
      function goLibrary() {
        window.location.href = "library.html";
      }

      // === æ›´æ–°ç™»å…¥å¾Œçš„ UI ===
      function updateUserUI(username) {
        userName.textContent = username;
        loginLink.style.display = "none";
        userInfo.style.display = "inline";
      }

      // === è‡ªå‹•æª¢æŸ¥ç™»å…¥ç‹€æ…‹ ===
      async function checkLogin() {
        const res = await fetch("/check-login", { credentials: "include" });
        const data = await res.json();
        if (data.success) {
          updateUserUI(data.user.username);
        }
      }
      checkLogin();
    </script>
  </body>
</html>
